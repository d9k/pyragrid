<script src="{{ request.static_url('best_tests_server:static/jquery.dataTables.js') }}"></script>
<link rel="stylesheet" href="{{ request.static_url('best_tests_server:static/jquery.dataTables.mod.css') }}"/>

{% compress 'js' %}
<script type="text/coffeescript">
    $(document).ready ->
        $.extend $.fn.dataTable.defaults,
            'sDom': 'fiptrl'
            'oLanguage': 'sUrl': '{{ request.static_url('best_tests_server:static/jquery.dataTables.russian.json') }}'

        $('body').on 'DOMNodeInserted', 'div', (e) ->
            filterDiv = $(this).find('.dataTables_filter')
            if filterDiv.length
                filterDiv.find('input').attr 'placeholder', 'Поиск...'
            return

{#        $.fn.dataTableExt.oApi.fnReloadAjax = (oSettings) ->#}
{#    #oSettings.sAjaxSource = sNewSource;#}
{#            @fnClearTable this#}
{#            @oApi._fnProcessingDisplay oSettings, true#}
{#            that = this#}
{#            $.getJSON oSettings.sAjaxSource, null, (json) ->#}
{##}
{#                ### Got the data - add it to the table ####}
{##}
{#                i = 0#}
{#                while i < json.aaData.length#}
{#                    that.oApi._fnAddData oSettings, json.aaData[i]#}
{#                    i++#}
{#                oSettings.aiDisplay = oSettings.aiDisplayMaster.slice()#}
{#                that.fnDraw that#}
{#                that.oApi._fnProcessingDisplay oSettings, false#}
{#                return#}
{#            return#}

        return

</script>
{% endcompress %}